<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>linechart</title>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      li {
        list-style: none;
      }
      #chartdiv {
        width: 98%;
        height: 600px;
        border: 1px solid #ccc;
        padding: 0;
        margin: 10px;
      }
      #chartLegend {
        margin-bottom: 20px;
      }
      #chartLegend .legend-item {
        display: inline-block;
        margin-right: 10px;
      }
      #chartLegend .legend-checkbox {
        margin-right: 5px;
      }

      .lineTooltip {
        padding: 10px;
      }
      .lineTooltip li {
        position: relative;
        margin: 2px 0;
      }
      .lineTooltip li:not(:first-child) {
        padding-left: 15px;
      }
      .lineTooltip li span {
        display: inline-block;
        font-size: 13px;
        font-weight: 400;
        color: rgba(255, 255, 255, 0.8);
        margin-right: 10px;
      }

      .lineTooltip li:first-child {
        font-family: pretendard;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .lineTooltip li::after {
        content: '';
        width: 10px;
        height: 10px;
        border-radius: 4px;
        position: absolute;
        left: 0;
        top: 50%;
        z-index: 1;
        transform: translate3d(0, -50%, 0);
      }

      .lineTooltip li:nth-child(2)::after {
        background-color: #f0295a;
      }
      .lineTooltip li:nth-child(3)::after {
        background-color: #26c1f8;
      }
      .lineTooltip li:nth-child(4)::after {
        background-color: #1db5ae;
      }
      .lineTooltip li:nth-child(5)::after {
        background-color: #5a56e1;
      }
      .lineTooltip li:nth-child(6)::after {
        background-color: #fecb27;
      }
      .lineTooltip li:nth-child(7)::after {
        background-color: #fe8fd6;
      }
      .lineTooltip li:nth-child(8)::after {
        background-color: #183dff;
      }
      .lineTooltip li:nth-child(9)::after {
        background-color: #8b00ff;
      }
      .lineTooltip li:nth-child(10)::after {
        background-color: #41e237;
      }

      .linechart-chkbox-top {
        display: flex;
      }
      .linechart-chkbox .inner {
        margin: 30px 10px;
      }
      .linechart-chkbox-bottom {
        display: flex;
      }
      .addbtn {
        padding: 10px 10px;
      }
      #checkboxes {
        display: flex;
        justify-content: space-between;
      }

      input[type='checkbox'] {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <div id="chartdiv"></div>
    <div id="checkboxes"></div>

    <script src="../lib/core.js"></script>
    <script src="../lib/charts.js"></script>
    <script src="../lib/animated.js"></script>
    <script src="../lib/material.js"></script>
    <script src="../lib/de_DE.js"></script>
    <script src="../lib/germanyLow.js"></script>

    <script>
      // chart.js
      am4core.ready(function () {
        // Create chart instance
        var chart = am4core.create('chartdiv', am4charts.XYChart)

        // Add data
        chart.data = [
          { date: new Date(2023, 0, 1), value1: 10, value2: 20, value3: 30 },
          { date: new Date(2023, 0, 2), value1: 15, value2: 25, value3: 35 }
          // Add more data points as needed
        ]

        // Create axes
        var dateAxis = chart.xAxes.push(new am4charts.DateAxis())
        dateAxis.renderer.grid.template.location = 0

        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis())

        // Create series
        var series1 = chart.series.push(new am4charts.LineSeries())
        series1.dataFields.valueY = 'value1'
        series1.dataFields.dateX = 'date'
        series1.name = 'Series 1'

        var series2 = chart.series.push(new am4charts.LineSeries())
        series2.dataFields.valueY = 'value2'
        series2.dataFields.dateX = 'date'
        series2.name = 'Series 2'

        var series3 = chart.series.push(new am4charts.LineSeries())
        series3.dataFields.valueY = 'value3'
        series3.dataFields.dateX = 'date'
        series3.name = 'Series 3'

        // Create checkboxes
        var checkboxes = document.getElementById('checkboxes')
        var seriesArray = [series1, series2, series3]

        for (var i = 0; i < seriesArray.length; i++) {
          var series = seriesArray[i]
          var checkbox = document.createElement('input')
          checkbox.type = 'checkbox'
          checkbox.checked = true
          checkbox.addEventListener('change', toggleSeries)

          var label = document.createElement('label')
          label.textContent = series.name
          label.appendChild(checkbox)

          checkboxes.appendChild(label)
          series.visible = true // 시리즈를 초기에 표시하도록 설정
        }

        // Toggle series visibility
        function toggleSeries(event) {
          var seriesIndex = Array.prototype.indexOf.call(
            seriesArray,
            event.target.nextElementSibling
          )
          if (seriesIndex !== -1) {
            // seriesIndex가 유효한 값일 때만 실행
            seriesArray[seriesIndex].visible = event.target.checked
          }
        }
      })
    </script>
  </body>
</html>
